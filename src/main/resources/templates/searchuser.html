<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns="http://www.w3.org/1999/xhtml">

<head>

    <title>Lexware || Accounts</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/home.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/jquery.dataTables.min.css}"/>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}"/>


    <script src="/js/jquery.js"></script>
    <script src="/js/jquery.dataTables.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" th:href="@{/css/login.css}"/>

</head>

<body>

<div class="container">
    <div class="bgc">
        <h2>Search Utility</h2>
        <div>
            <form class="form-horizontal" th:object="${client}" th:action="@{/utils}" method="post">
                <div class="form-group">
                    <label class="col-sm-2 control-label">Employee LastName:</label>
                    <div class="col-sm-10">
                        <input type="text" autofocus="true" required="true"
                               id="auto" th:title="#{UserIdAuto}"
                               placeholder="Type a user last name, if there are many choose one of them"
                               class="form-control" th:field="*{lastName}" onkeyup="loadUsers()"/>
                    </div>
                </div>

                <div class="row">
                    <input type="submit" value="Search" th:value="Search"
                           class="btn btn-default" />
                </div>
            </form>
            <div th:if="${not #lists.isEmpty(search)}">
                <p style="text-align: center; color: #08088A; font-size: 16px;">Registered Clients</p>
                <table id="deplist" class="display" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th>National Id</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Email</th>
                        <th>Edit</th>
                    </tr>
                    </thead>
                    <tr th:each="client : ${search}">
                        <td th:text="${client.nationalID}">Id</td>
                        <td th:text="${client.name}">First Name</td>
                        <td th:text="${client.lastName}">Last Name</td>
                        <td th:text="${client.email}">Gender</td>
                        <td>
                            <a th:href="@{'/client/addaccount/id'(id=${client.id})}"><span
                                    class="glyphicon glyphicon-pencil"></span>Add Client</a>
                        </td>


                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="footer">

</div>

<script>
    $("#auto").focus(function () {
        $("#auto").autocomplete("option", "minLength", 3);
        $("#auto").autocomplete("option", "delay", 500);
    });
    $(document).ready(function () {
        $("#auto").autocomplete({
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            source: function (request, response) {
                $.getJSON("/utils//getClients/", {lastName: request.term}, function (result) {
                    response($.map(result, function (client) {
                        return {
                            label: client.lastName,
                            value: client.lastName
                        };

                    }));
                });
            }
        }).autocomplete("widget").addClass("fixed-height");

    });
</script>

<script>
    $(document).ready(function () {
        $('table.display').DataTable();
    });

</script>

<script>
    function loadUsers() {

        $("#auto").autocomplete("option", "minLength", 3);
        $("#auto").autocomplete("option", "delay", 500);
        $("#auto").autocomplete({
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            source: function (request, response) {
                $.getJSON("/utils/getEmployees/", {lastName: request.term}, function (result) {
                    response($.map(result, function (employee) {
                        return {
                            label: employee.lastName,
                            value: employee.lastName
                        };

                    }));
                });
            }
        }).autocomplete("widget").addClass("fixed-height");
    }
</script>





</body>
</html>